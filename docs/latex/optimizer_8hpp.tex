\hypertarget{optimizer_8hpp}{}\doxysection{src/optimizer.hpp File Reference}
\label{optimizer_8hpp}\index{src/optimizer.hpp@{src/optimizer.hpp}}
{\ttfamily \#include $<$iomanip$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$Eigen/\+Dense$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$nlopt.\+hpp$>$}\newline
{\ttfamily \#include $<$list$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include \char`\"{}sampler.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}utils.\+hpp\char`\"{}}\newline
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structBias}{Bias$<$ n $>$}}
\item 
struct \mbox{\hyperlink{structConstraintCoeffs}{Constraint\+Coeffs$<$ n $>$}}
\item 
struct \mbox{\hyperlink{structSlackData}{Slack\+Data$<$ n, m, l $>$}}
\item 
class \mbox{\hyperlink{classBaseOptimizer}{Base\+Optimizer$<$ n $>$}}
\item 
class \mbox{\hyperlink{classBiasedOptimizer}{Biased\+Optimizer$<$ n $>$}}
\item 
class \mbox{\hyperlink{classSlackOptimizer}{Slack\+Optimizer$<$ n, m, l $>$}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$std\+::size\+\_\+t n, std\+::size\+\_\+t m, std\+::size\+\_\+t l$>$ }\\void \mbox{\hyperlink{optimizer_8hpp_a5a24644de3ab7917d46bc7368a87b8fd}{init\+Slack\+Data}} (\mbox{\hyperlink{structSlackData}{Slack\+Data}}$<$ \mbox{\hyperlink{quadratic__cons_8cpp_a0ada73864feca33d57698f2c4603f1fb}{n}}, \mbox{\hyperlink{quadratic__cons_8cpp_a8446f714d1602c075cb142871820dd7d}{m}}, \mbox{\hyperlink{quadratic__cons_8cpp_ab1d37f8bc52cc156762037dad1811184}{l}} $>$ \&sl)
\item 
{\footnotesize template$<$std\+::size\+\_\+t n$>$ }\\double \mbox{\hyperlink{optimizer_8hpp_aefd17447419e08224566597bc7da201b}{Biased\+Objective}} (const std\+::vector$<$ double $>$ \&x, std\+::vector$<$ double $>$ \&grad, void $\ast$data)
\item 
{\footnotesize template$<$std\+::size\+\_\+t n, std\+::size\+\_\+t m, std\+::size\+\_\+t l$>$ }\\double \mbox{\hyperlink{optimizer_8hpp_a229dd0794c561124d8a14c586affcde0}{slack\+Objective}} (const std\+::vector$<$ double $>$ \&x, std\+::vector$<$ double $>$ \&grad, void $\ast$data)
\item 
{\footnotesize template$<$std\+::size\+\_\+t n$>$ }\\double \mbox{\hyperlink{optimizer_8hpp_a3746f9616a9c320fc14f32f946b77fb8}{linear\+Constraint}} (const std\+::vector$<$ double $>$ \&x, std\+::vector$<$ double $>$ \&grad, void $\ast$data)
\item 
{\footnotesize template$<$std\+::size\+\_\+t n$>$ }\\double \mbox{\hyperlink{optimizer_8hpp_a2dda2fdecf7578b95a5637164e63c896}{quadratic\+Constraint}} (const std\+::vector$<$ double $>$ \&x, std\+::vector$<$ double $>$ \&grad, void $\ast$data)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
variety of optimizers (Biased, slack) to use for finding feasible samples in a constrained space

\begin{DoxyAuthor}{Author}
Pihilip Oedi 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2021-\/06-\/03 
\end{DoxyDate}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{optimizer_8hpp_aefd17447419e08224566597bc7da201b}\label{optimizer_8hpp_aefd17447419e08224566597bc7da201b}} 
\index{optimizer.hpp@{optimizer.hpp}!BiasedObjective@{BiasedObjective}}
\index{BiasedObjective@{BiasedObjective}!optimizer.hpp@{optimizer.hpp}}
\doxysubsubsection{\texorpdfstring{BiasedObjective()}{BiasedObjective()}}
{\footnotesize\ttfamily template$<$std\+::size\+\_\+t n$>$ \\
double Biased\+Objective (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ double $>$ \&}]{x,  }\item[{std\+::vector$<$ double $>$ \&}]{grad,  }\item[{void $\ast$}]{data }\end{DoxyParamCaption})}

Evaluates objective function in Biased optimization 
\begin{DoxyParams}{Parameters}
{\em x} & Current location at which to evaluate objective \\
\hline
{\em grad} & Vector of current gradient \\
\hline
{\em data} & Auxilliary data to be used in calculations, of type \mbox{\hyperlink{structBias}{Bias}} \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Objective value 
\end{DoxyReturn}


Definition at line 95 of file optimizer.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{96 \{}
\DoxyCodeLine{97     \textcolor{keyword}{typedef} Matrix<double, n, 1> vec;}
\DoxyCodeLine{98     \mbox{\hyperlink{structBias}{Bias<n>}} *\mbox{\hyperlink{linear__cons_8cpp_a1510a66dacf9cf3586de5fc89ae2a073}{b}} = (\mbox{\hyperlink{structBias}{Bias<n>}}*) data;}
\DoxyCodeLine{99     vec x\_vec(x.data());}
\DoxyCodeLine{100     vec x\_x0 = x\_vec -\/ \mbox{\hyperlink{linear__cons_8cpp_a1510a66dacf9cf3586de5fc89ae2a073}{b}}-\/>x0;}
\DoxyCodeLine{101     \textcolor{keywordflow}{if}(!grad.empty())\{       }
\DoxyCodeLine{102         \mbox{\hyperlink{namespaceutils_a1351e97ae99bb94d24792cf54ce9a860}{utils::copyEig2Vec}}(2*x\_x0, grad);}
\DoxyCodeLine{103 \textcolor{comment}{/*    for (std::size\_t i = 0; i<x\_x0.size() ;++i)\{}}
\DoxyCodeLine{104 \textcolor{comment}{        grad[i] = 2*x\_x0[i];}}
\DoxyCodeLine{105 \textcolor{comment}{    \}*/}}
\DoxyCodeLine{106     \}   }
\DoxyCodeLine{107     \textcolor{keywordflow}{return} x\_x0.transpose()*x\_x0;    }
\DoxyCodeLine{108 \}}

\end{DoxyCode}
\mbox{\Hypertarget{optimizer_8hpp_a5a24644de3ab7917d46bc7368a87b8fd}\label{optimizer_8hpp_a5a24644de3ab7917d46bc7368a87b8fd}} 
\index{optimizer.hpp@{optimizer.hpp}!initSlackData@{initSlackData}}
\index{initSlackData@{initSlackData}!optimizer.hpp@{optimizer.hpp}}
\doxysubsubsection{\texorpdfstring{initSlackData()}{initSlackData()}}
{\footnotesize\ttfamily template$<$std\+::size\+\_\+t n, std\+::size\+\_\+t m, std\+::size\+\_\+t l$>$ \\
void init\+Slack\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structSlackData}{Slack\+Data}}$<$ \mbox{\hyperlink{quadratic__cons_8cpp_a0ada73864feca33d57698f2c4603f1fb}{n}}, \mbox{\hyperlink{quadratic__cons_8cpp_a8446f714d1602c075cb142871820dd7d}{m}}, \mbox{\hyperlink{quadratic__cons_8cpp_ab1d37f8bc52cc156762037dad1811184}{l}} $>$ \&}]{sl }\end{DoxyParamCaption})}

Initializes slack variables to use for slack optimization 
\begin{DoxyParams}{Parameters}
{\em sl} & \mbox{\hyperlink{structSlackData}{Slack\+Data}} struct containing vectors of decision variables \\
\hline
\end{DoxyParams}


Definition at line 70 of file optimizer.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{71 \{}
\DoxyCodeLine{72     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0; i<\mbox{\hyperlink{linear__cons_8cpp_a0ada73864feca33d57698f2c4603f1fb}{n}}+\mbox{\hyperlink{linear__cons_8cpp_a8446f714d1602c075cb142871820dd7d}{m}}+\mbox{\hyperlink{linear__cons_8cpp_ab1d37f8bc52cc156762037dad1811184}{l}}+\mbox{\hyperlink{linear__cons_8cpp_ab1d37f8bc52cc156762037dad1811184}{l}}; i++)}
\DoxyCodeLine{73     \{}
\DoxyCodeLine{74         \textcolor{keywordflow}{if} (i >= \mbox{\hyperlink{linear__cons_8cpp_a0ada73864feca33d57698f2c4603f1fb}{n}} \&\& i <\mbox{\hyperlink{linear__cons_8cpp_a0ada73864feca33d57698f2c4603f1fb}{n}}+\mbox{\hyperlink{linear__cons_8cpp_a8446f714d1602c075cb142871820dd7d}{m}})}
\DoxyCodeLine{75         \{}
\DoxyCodeLine{76             sl.\mbox{\hyperlink{structSlackData_a5cf416e1744f990ad3a5fb2876c7c3d9}{a}}(i) = 1;}
\DoxyCodeLine{77             sl.\mbox{\hyperlink{structSlackData_aaa89194baa36b247fc9620c00207cf04}{g}}(i) = 1;}
\DoxyCodeLine{78         \}}
\DoxyCodeLine{79         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (i >= \mbox{\hyperlink{linear__cons_8cpp_a0ada73864feca33d57698f2c4603f1fb}{n}}+\mbox{\hyperlink{linear__cons_8cpp_a8446f714d1602c075cb142871820dd7d}{m}}+\mbox{\hyperlink{linear__cons_8cpp_ab1d37f8bc52cc156762037dad1811184}{l}})}
\DoxyCodeLine{80         \{}
\DoxyCodeLine{81             sl.\mbox{\hyperlink{structSlackData_a5cf416e1744f990ad3a5fb2876c7c3d9}{a}}(i) = 1;}
\DoxyCodeLine{82             sl.\mbox{\hyperlink{structSlackData_aaa89194baa36b247fc9620c00207cf04}{g}}(i) = 1;}
\DoxyCodeLine{83         \};}
\DoxyCodeLine{84     \};}
\DoxyCodeLine{85 \};}

\end{DoxyCode}
\mbox{\Hypertarget{optimizer_8hpp_a3746f9616a9c320fc14f32f946b77fb8}\label{optimizer_8hpp_a3746f9616a9c320fc14f32f946b77fb8}} 
\index{optimizer.hpp@{optimizer.hpp}!linearConstraint@{linearConstraint}}
\index{linearConstraint@{linearConstraint}!optimizer.hpp@{optimizer.hpp}}
\doxysubsubsection{\texorpdfstring{linearConstraint()}{linearConstraint()}}
{\footnotesize\ttfamily template$<$std\+::size\+\_\+t n$>$ \\
double linear\+Constraint (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ double $>$ \&}]{x,  }\item[{std\+::vector$<$ double $>$ \&}]{grad,  }\item[{void $\ast$}]{data }\end{DoxyParamCaption})}

Evaluates a linear constraint, function can be used with nlopt 
\begin{DoxyParams}{Parameters}
{\em x} & Current location at which to evaluate constraint \\
\hline
{\em grad} & Vector of current gradient \\
\hline
{\em data} & Auxilliary data to be used in calculations \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Constraint value 
\end{DoxyReturn}


Definition at line 137 of file optimizer.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{138 \{}
\DoxyCodeLine{139     \textcolor{keyword}{typedef} Matrix<double, n, 1> vec;}
\DoxyCodeLine{140     \mbox{\hyperlink{structConstraintCoeffs}{ConstraintCoeffs<n>}} *\mbox{\hyperlink{linear__cons_8cpp_a3c893f25ddb33878ec8289a9c5ed1205}{c}} = (\mbox{\hyperlink{structConstraintCoeffs}{ConstraintCoeffs<n>}}*) data;}
\DoxyCodeLine{141     vec x\_vec(x.data());}
\DoxyCodeLine{142     \textcolor{keywordflow}{if} (!grad.empty())\{}
\DoxyCodeLine{143         \mbox{\hyperlink{namespaceutils_a1351e97ae99bb94d24792cf54ce9a860}{utils::copyEig2Vec}}(\mbox{\hyperlink{linear__cons_8cpp_a3c893f25ddb33878ec8289a9c5ed1205}{c}}-\/>coeffs, grad);}
\DoxyCodeLine{144     \}}
\DoxyCodeLine{145     \textcolor{keywordflow}{return} x\_vec.transpose() * \mbox{\hyperlink{linear__cons_8cpp_a3c893f25ddb33878ec8289a9c5ed1205}{c}}-\/>coeffs -\/ \mbox{\hyperlink{linear__cons_8cpp_a3c893f25ddb33878ec8289a9c5ed1205}{c}}-\/>cons;}
\DoxyCodeLine{146 \}}

\end{DoxyCode}
\mbox{\Hypertarget{optimizer_8hpp_a2dda2fdecf7578b95a5637164e63c896}\label{optimizer_8hpp_a2dda2fdecf7578b95a5637164e63c896}} 
\index{optimizer.hpp@{optimizer.hpp}!quadraticConstraint@{quadraticConstraint}}
\index{quadraticConstraint@{quadraticConstraint}!optimizer.hpp@{optimizer.hpp}}
\doxysubsubsection{\texorpdfstring{quadraticConstraint()}{quadraticConstraint()}}
{\footnotesize\ttfamily template$<$std\+::size\+\_\+t n$>$ \\
double quadratic\+Constraint (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ double $>$ \&}]{x,  }\item[{std\+::vector$<$ double $>$ \&}]{grad,  }\item[{void $\ast$}]{data }\end{DoxyParamCaption})}

Evaluates a quadratic constraint, function can be used with nlopt 
\begin{DoxyParams}{Parameters}
{\em x} & Current location at which to evaluate constraint \\
\hline
{\em grad} & Vector of current gradient \\
\hline
{\em data} & Auxilliary data to be used in calculations, of type \mbox{\hyperlink{structConstraintCoeffs}{Constraint\+Coeffs}} that specifies coefficients of constraint \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Constraint value 
\end{DoxyReturn}


Definition at line 157 of file optimizer.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{158 \{}
\DoxyCodeLine{159     \textcolor{keyword}{typedef} Matrix<double, n, 1> vec;}
\DoxyCodeLine{160     \textcolor{keywordtype}{double} res = 0;}
\DoxyCodeLine{161     \mbox{\hyperlink{structConstraintCoeffs}{ConstraintCoeffs<n>}} *\mbox{\hyperlink{linear__cons_8cpp_a3c893f25ddb33878ec8289a9c5ed1205}{c}} = (\mbox{\hyperlink{structConstraintCoeffs}{ConstraintCoeffs<n>}}*) data;}
\DoxyCodeLine{162     vec x\_vec(x.data());}
\DoxyCodeLine{163     \textcolor{comment}{// 0.5 * x.T@P@x + q.T@x+ r}}
\DoxyCodeLine{164     \textcolor{keywordflow}{if} (!grad.empty())\{}
\DoxyCodeLine{165         \mbox{\hyperlink{namespaceutils_a1351e97ae99bb94d24792cf54ce9a860}{utils::copyEig2Vec}}(\mbox{\hyperlink{linear__cons_8cpp_a3c893f25ddb33878ec8289a9c5ed1205}{c}}-\/>P.transpose()*x\_vec + \mbox{\hyperlink{linear__cons_8cpp_a3c893f25ddb33878ec8289a9c5ed1205}{c}}-\/>q, grad);}
\DoxyCodeLine{166     \}}
\DoxyCodeLine{167     res += 0.5 * x\_vec.transpose() * \mbox{\hyperlink{linear__cons_8cpp_a3c893f25ddb33878ec8289a9c5ed1205}{c}}-\/>P * x\_vec; }
\DoxyCodeLine{168     res += x\_vec.transpose()*\mbox{\hyperlink{linear__cons_8cpp_a3c893f25ddb33878ec8289a9c5ed1205}{c}}-\/>q;  }
\DoxyCodeLine{169     \textcolor{keywordflow}{return} res -\/ \mbox{\hyperlink{linear__cons_8cpp_a3c893f25ddb33878ec8289a9c5ed1205}{c}}-\/>r;}
\DoxyCodeLine{170 \}}

\end{DoxyCode}
\mbox{\Hypertarget{optimizer_8hpp_a229dd0794c561124d8a14c586affcde0}\label{optimizer_8hpp_a229dd0794c561124d8a14c586affcde0}} 
\index{optimizer.hpp@{optimizer.hpp}!slackObjective@{slackObjective}}
\index{slackObjective@{slackObjective}!optimizer.hpp@{optimizer.hpp}}
\doxysubsubsection{\texorpdfstring{slackObjective()}{slackObjective()}}
{\footnotesize\ttfamily template$<$std\+::size\+\_\+t n, std\+::size\+\_\+t m, std\+::size\+\_\+t l$>$ \\
double slack\+Objective (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ double $>$ \&}]{x,  }\item[{std\+::vector$<$ double $>$ \&}]{grad,  }\item[{void $\ast$}]{data }\end{DoxyParamCaption})}

Evaluates objective function in slack optimization 
\begin{DoxyParams}{Parameters}
{\em x} & Current location at which to evaluate objective \\
\hline
{\em grad} & Vector of current gradient \\
\hline
{\em data} & Auxilliary data to be used in calculations \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Objective value 
\end{DoxyReturn}


Definition at line 118 of file optimizer.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{119 \{}
\DoxyCodeLine{120     \textcolor{keyword}{typedef} Matrix<double, n+m+l+l,1> vec;}
\DoxyCodeLine{121     \mbox{\hyperlink{structSlackData}{SlackData<n,m,l>}}* u = (\mbox{\hyperlink{structSlackData}{SlackData<n,m,l>}}*) data;}
\DoxyCodeLine{122     vec x\_vec(x.data());}
\DoxyCodeLine{123     \textcolor{keywordflow}{if}(!grad.empty())\{}
\DoxyCodeLine{124         \mbox{\hyperlink{namespaceutils_a1351e97ae99bb94d24792cf54ce9a860}{utils::copyEig2Vec}}(u-\/>\mbox{\hyperlink{structSlackData_a5cf416e1744f990ad3a5fb2876c7c3d9}{a}}, grad);}
\DoxyCodeLine{125     \}}
\DoxyCodeLine{126     \textcolor{keywordflow}{return} u-\/>\mbox{\hyperlink{structSlackData_a5cf416e1744f990ad3a5fb2876c7c3d9}{a}}.transpose()*x\_vec;}
\DoxyCodeLine{127 \}}

\end{DoxyCode}
